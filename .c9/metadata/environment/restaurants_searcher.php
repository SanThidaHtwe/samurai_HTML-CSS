{"filter":false,"title":"restaurants_searcher.php","tooltip":"/restaurants_searcher.php","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["<?php","print('Hello PHP!');","?>",""],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["<?php","print('Hello PHP!');","?>",""],"id":6},{"start":{"row":0,"column":0},"end":{"row":0,"column":24},"action":"insert","lines":["restaurants_searcher.php"]}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":24},"action":"remove","lines":["restaurants_searcher.php"],"id":7},{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["<?php","print('Hello PHP!');","?>",""]}],[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["<?php","print('Hello PHP!');","?>",""],"id":8},{"start":{"row":0,"column":0},"end":{"row":43,"column":2},"action":"insert","lines":["# restaurants_searcher.php","","<?php","require 'vendor/autoload.php';","","use GuzzleHttp\\Client;","","# 初期設定","$KEYID = \"メールに記載されていたアクセスキーをここに入力\";","$HIT_PER_PAGE = 100;","$PREF = \"Z011\";","$FREEWORD = \"渋谷駅\";","$FORMAT = \"json\";","","$PARAMS = [\"key\"=> $KEYID, \"count\"=>$HIT_PER_PAGE, \"pref\"=>$PREF, \"keyword\"=>$FREEWORD, \"format\"=>$FORMAT];","","function write_data_to_csv($params){","    ","    $restaurants = [];","    $client = new Client();","    try{","        $json_res = $client->request('GET', \"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\", ['query' => $params])->getBody();","    }catch(Exception $e){","        return print(\"エラーが発生しました。APIのURLを確認してください。\");","    }","    $response = json_decode($json_res,true);","    ","    if(isset($response[\"results\"][\"error\"])){","        return(print(\"エラーが発生しました。APIのパラメータを確認してください。\"));","    }","    ","    foreach($response[\"results\"][\"shop\"] as $restaurant){","        $restaurant_name = $restaurant[\"name\"];","        $restaurants[] = $restaurant_name;","    }","    $handle = fopen(\"restaurants_list.csv\", \"wb\");","    fputcsv($handle, $restaurants);","    fclose($handle);","    return print_r($restaurants);","}","","write_data_to_csv($PARAMS);","","?>"]}],[{"start":{"row":8,"column":10},"end":{"row":8,"column":33},"action":"remove","lines":["メールに記載されていたアクセスキーをここに入力"],"id":9},{"start":{"row":8,"column":10},"end":{"row":8,"column":26},"action":"insert","lines":["9b096ff601a34789"]}],[{"start":{"row":0,"column":0},"end":{"row":43,"column":2},"action":"remove","lines":["# restaurants_searcher.php","","<?php","require 'vendor/autoload.php';","","use GuzzleHttp\\Client;","","# 初期設定","$KEYID = \"9b096ff601a34789\";","$HIT_PER_PAGE = 100;","$PREF = \"Z011\";","$FREEWORD = \"渋谷駅\";","$FORMAT = \"json\";","","$PARAMS = [\"key\"=> $KEYID, \"count\"=>$HIT_PER_PAGE, \"pref\"=>$PREF, \"keyword\"=>$FREEWORD, \"format\"=>$FORMAT];","","function write_data_to_csv($params){","    ","    $restaurants = [];","    $client = new Client();","    try{","        $json_res = $client->request('GET', \"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\", ['query' => $params])->getBody();","    }catch(Exception $e){","        return print(\"エラーが発生しました。APIのURLを確認してください。\");","    }","    $response = json_decode($json_res,true);","    ","    if(isset($response[\"results\"][\"error\"])){","        return(print(\"エラーが発生しました。APIのパラメータを確認してください。\"));","    }","    ","    foreach($response[\"results\"][\"shop\"] as $restaurant){","        $restaurant_name = $restaurant[\"name\"];","        $restaurants[] = $restaurant_name;","    }","    $handle = fopen(\"restaurants_list.csv\", \"wb\");","    fputcsv($handle, $restaurants);","    fclose($handle);","    return print_r($restaurants);","}","","write_data_to_csv($PARAMS);","","?>"],"id":10},{"start":{"row":0,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["# restaurants_searcher.php","","<?php","require 'vendor/autoload.php';","","use GuzzleHttp\\Client;","","# 初期設定","$KEYID = \"メールに記載されていたアクセスキーをここに入力\";","$HIT_PER_PAGE = 100;","$PREF = \"Z011\";","$FREEWORD = \"渋谷駅\";","$FORMAT = \"json\";","","$PARAMS = [\"key\"=> $KEYID, \"count\"=>$HIT_PER_PAGE, \"pref\"=>$PREF, \"keyword\"=>$FREEWORD, \"format\"=>$FORMAT];","","function write_data_to_csv($params){","    ","    $restaurants = [[\"名称\",\"営業日\",\"住所\",\"アクセス\"]];","    $client = new Client();","    try{","        $json_res = $client->request('GET', \"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\", ['query' => $params])->getBody();","    }catch(Exception $e){","        return print(\"エラーが発生しました。APIのURLを確認してください。\");","    }","    $response = json_decode($json_res,true);","    ","    if(isset($response[\"results\"][\"error\"])){","        return(print(\"エラーが発生しました。APIのパラメータを確認してください。\"));","    }","    ","    foreach($response[\"results\"][\"shop\"] as $restaurant){","        $rest_info = [$restaurant[\"name\"],$restaurant[\"open\"],$restaurant[\"address\"],$restaurant[\"access\"]];","        $restaurants[] = $rest_info;","    }","    $handle = fopen(\"restaurants_list.csv\", \"wb\");","    ","    foreach ($restaurants as $values){","        fputcsv($handle, $values);","    }","","    fclose($handle);","    return print_r($restaurants);","}","","write_data_to_csv($PARAMS);","","?>",""]}],[{"start":{"row":8,"column":10},"end":{"row":8,"column":33},"action":"remove","lines":["メールに記載されていたアクセスキーをここに入力"],"id":11},{"start":{"row":8,"column":10},"end":{"row":8,"column":26},"action":"insert","lines":["9b096ff601a34789"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":5},"end":{"row":2,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1644495268844,"hash":"357f37b4bb0f391476bf333a6d5a92715f26082a"}